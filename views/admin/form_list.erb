<style>
  #menu {
    position: fixed;
    top: 0;
    right: -250px; /* 最初は画面の外に隠す */
    width: 250px;
    height: 100%;
    background-color: white;
    border-left: 1px solid #ccc;
    box-shadow: -2px 0 8px rgba(0,0,0,0.2);
    padding: 20px;
    transition: right 0.3s; /* なめらかに動かす */
    z-index: 999; /* ボタンより下にする */
  }
  
  #menu.open {
    right: 0;
  }
  
  /* ここからボタンのスタイル！ */
  #menuButton {
    position: fixed;
    top: 20px;
    right: 20px;
    z-index: 1000; /* メニューより上に出す */
    transition: right 0.3s; /* これをつける！ */
  }
  
  /* メニューが開いたら、ボタンも動かす */
  .menu-open #menuButton {
    right: 270px; /* メニューの幅(250px)＋ちょっと余裕20px */
  }
</style>

<div>
  <form method="GET" action="/form_templates/new">
    <button type="submit">新規作成</button>
  </form>
</div>
<div>
  <div>
  <!-- ハンバーガーボタン -->
  <button id="menuButton">☰</button>

  <!-- スライドメニュー -->
  <div id="menu">
    <form method="GET" action="/user/edit">
      <button type="submit">ユーザー設定編集</button>
    </form>
    <form method="POST" action="/logout">
      <input type="hidden" name="_method" value="DELETE">
      <button type="submit">ログアウト</button>
    </form>
  </div>
</div>
<div>
  <ul>
    <div>
      <% @forms.each do |form| %>
        <li>
          <% today_deadline = Time.new(Time.now.year, Time.now.month, Time.now.day) %>
            <h4 name="form_name"><%= form.form_name %></h4>
            <input type="hidden" value="<%= form.playlist_id %>" name="playlist_id">
            <p name="created_at">作成日：<%= form.created_at.strftime("%Y-%m-%d %H:%M") %></p>
            <p name="deadline">期限：
              <% if form.deadline.nil? || form.deadline.to_s.strip.empty? %>
                なし
              <% elsif form.deadline < today_deadline %>
                期限切れ
              <% else %>
                <%= form.deadline %>
              <% end %>
            </p>
            <form method="GET" action="/forms/<%= form.form_key %>/edit"> 
              <button type="submit">編集</button>
            </form>
            <form method="POST" action="/forms/<%= form.form_key %>">
              <input type="hidden" name="_method" value="DELETE">
              <input type="submit" value="削除">
            </form>
            <% if form.deadline.nil? || form.deadline >= today_deadline %>
            <form method="GET" action="/form/<%= form.form_key %>">
              <button type="submit">フォームを開く</button>
            </form>
           
          <% end %>
          <form method="GET" action="/request_log/<%= form.form_key %>">
            <button type="submit">リクエスト履歴</button>
          </form>
          <button class="copy-link" data-link="https://e424d4bb401e40f1ae8263fec56b8cfa.vfs.cloud9.ap-northeast-1.amazonaws.com/form/<%= form.form_key %>">リンクをコピー</button>
        </li>
      <% end %>
    </div>
  </ul>
</div>
<script src="/js/main.js"></script>

